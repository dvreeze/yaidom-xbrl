<?xml version="1.0" encoding="UTF-8"?>
<!-- Copyright 2008 XBRL International. All Rights Reserved. -->
<?xml-stylesheet type="text/xsl" href="../stylesheets/conformanceFunction.xsl"?>
<testcase
  xmlns="http://xbrl.org/2008/conformance"
  xmlns:reg="http://xbrl.org/2008/registry"
  xmlns:fcn="http://xbrl.org/2008/function"
  xmlns:cfcn="http://xbrl.org/2008/conformance/function"
  xmlns:xbrli="http://www.xbrl.org/2003/instance"
  xmlns:link="http://www.xbrl.org/2003/linkbase"
  xmlns:xhtml="http://www.w3.org/1999/xhtml"
  xmlns:xfi="http://www.xbrl.org/2008/function/instance"
  xmlns:xfie="http://www.xbrl.org/2008/function/instance/error"
  xmlns:xqt-err="http://www.w3.org/2005/xqt-errors"
  xmlns:concept="http://xbrl.org/formula/conformance/example" 
  xmlns:xlink="http://www.w3.org/1999/xlink"
  xmlns:xl="http://www.xbrl.org/2003/XLink"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xsi:schemaLocation="
  http://xbrl.org/2008/registry ../schemas/registry.xsd
  http://xbrl.org/2008/function ../schemas/function.xsd
  http://xbrl.org/2008/conformance ../schemas/conformance.xsd
  http://xbrl.org/2008/conformance/function ../schemas/conformanceFunction.xsd
  ">
  <owners>
    <reg:owner id="herm">
      <reg:name>Herm Fischer</reg:name>
      <reg:affiliation>UBMatrix / Mark V Systems</reg:affiliation>
      <reg:email>fischer@markv.com</reg:email>
     <reg:assumedOwnership moment="2009-11-04T20:00:00" />
    </reg:owner>

    <reg:owner id="andy">
      <reg:name>Andy Harris</reg:name>
      <reg:affiliation>UBMatrix</reg:affiliation>
      <reg:email>andy.harris@ubmatrix.com</reg:email>
     <reg:assumedOwnership moment="2010-09-14T12:00:00" />
    </reg:owner>
    
   <reg:owner id="peter">
      <reg:name>Peter Cowan</reg:name>
      <reg:affiliation>CoreFiling</reg:affiliation>
      <reg:email>prc@corefiling.com</reg:email>
     <reg:assumedOwnership moment="2012-11-30T12:30:00" />
    </reg:owner>
  </owners>

  <number>90510</number>

  <name>Function test for xfi:distinct-nonAbstract-parent-concepts</name>

  <documentation>
    <xhtml:p>
      Tests of function xfi:distinct-nonAbstract-parent-concepts($linkrole as xs:string?, $arcrole as xs:string) as element(xs:QName)*
    </xhtml:p>
  </documentation>

  <reference xlink:type="simple" xlink:href="http://www.xbrl.org/Specification/XF-PWD-2006-12-07.htm#_Toc152670666"/>

  <variation id="V-01">
    <name>Non-abstract parents, link1</name>
    <documentation>
      <xhtml:p>
      </xhtml:p>
     </documentation>
    <inputs>
     <schema readMeFirst="true" id="V01" xlink:type="simple" xlink:href="nav-rel-test-with-abstract.xsd"/>
     <cfcn:call file="V01">
        xfi:distinct-nonAbstract-parent-concepts(
           'http://abc.com/role/link1',
           'http://www.xbrl.org/2003/arcrole/parent-child')
      </cfcn:call>
    </inputs>
    <outputs>
      <cfcn:test>
         count($result) eq 5 and 
         count(distinct-values($result)) eq 5 and 
         (every $r in $result satisfies 
          ($r instance of xs:QName) and
          exists( index-of( (
            QName('http://abc.com/test','A'),
            QName('http://abc.com/test','A112'),
            QName('http://abc.com/test','A113'),
            QName('http://abc.com/test','A2'),
            QName('http://abc.com/test','A21')
            ), $r) ))
      </cfcn:test>
    </outputs>
  </variation>
  
  <variation id="V-02">
    <name>Non-abstract parents, standard link</name>
    <documentation>
      <xhtml:p>
      </xhtml:p>
     </documentation>
    <inputs>
     <schema readMeFirst="true" id="V02" xlink:type="simple" xlink:href="nav-rel-test-with-abstract2.xsd"/>
     <cfcn:call file="V02">
        xfi:distinct-nonAbstract-parent-concepts(
           '',
           'http://www.xbrl.org/2003/arcrole/parent-child')
      </cfcn:call>
    </inputs>
    <outputs>
      <cfcn:test>
         count($result) eq 5 and 
         count(distinct-values($result)) eq 5 and 
         (every $r in $result satisfies 
          ($r instance of xs:QName) and
          exists( index-of( (
            QName('http://abc.com/test','A'),
            QName('http://abc.com/test','A112'),
            QName('http://abc.com/test','A113'),
            QName('http://abc.com/test','A2'),
            QName('http://abc.com/test','A21')
            ), $r) ))
      </cfcn:test>
    </outputs>
  </variation>
  
  <variation id="V-02a">
    <name>Non-abstract parents, standard link</name>
    <documentation>
      <xhtml:p>
      Variation of V-02 but uses an empty sequence as the linkrole argument.
      </xhtml:p>
     </documentation>
    <inputs>
     <schema readMeFirst="true" id="V02a" xlink:type="simple" xlink:href="nav-rel-test-with-abstract2.xsd"/>
     <cfcn:call file="V02a">
        xfi:distinct-nonAbstract-parent-concepts(
           (),
           'http://www.xbrl.org/2003/arcrole/parent-child')
      </cfcn:call>
    </inputs>
    <outputs>
      <cfcn:test>
         count($result) eq 5 and 
         count(distinct-values($result)) eq 5 and 
         (every $r in $result satisfies 
          ($r instance of xs:QName) and
          exists( index-of( (
            QName('http://abc.com/test','A'),
            QName('http://abc.com/test','A112'),
            QName('http://abc.com/test','A113'),
            QName('http://abc.com/test','A2'),
            QName('http://abc.com/test','A21')
            ), $r) ))
      </cfcn:test>
    </outputs>
  </variation>



  <revisions>
    <reg:revision on="2009-11-04T20:00:00" by="herm">
      <xhtml:p>
        Created.
      </xhtml:p>
    </reg:revision>

    <reg:revision on="2010-09-07T00:00:00" by="herm">
      <xhtml:p>
        Incorporated feedback from Hitoshi Okumura.
        Added A112 to V-01 test result.  Added xs:anyURI constructor functions to anyURI parameters.
      </xhtml:p>
    </reg:revision>

    <reg:revision on="2010-09-09T00:00:00" by="herm">
      <xhtml:p>
        Changed role URIs to strings for cast-less coding and to be similar to fn:QName's $paramURI, an xs:string.
      </xhtml:p>
    </reg:revision>
  
    <reg:revision on="2010-09-14T12:00:00" by="andy">
      <xhtml:p>
        Fixed issues raised by Okumura-san.
      </xhtml:p>
    </reg:revision>
    
    <reg:revision on="2011-06-22T00:00:00" by="herm">
      <xhtml:p>
        Added xmlns:xs.
      </xhtml:p>
    </reg:revision>
    
    <reg:revision on="2012-11-30T12:30:00" by="peter">
      <xhtml:p>
        Added two tests for standard link as the linkrole argument. These use an empty string and an empty sequence respectively to specify it.
      </xhtml:p>
    </reg:revision>
  </revisions>

</testcase>





